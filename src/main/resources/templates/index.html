<!DOCTYPE HTML>
<html xmlns:th="http://www.thymeleaf.org">
<head>
    <title>刈剑丶社区</title>
    <meta http-equiv="Content-Type" content="text/html; charset=UTF-8" />

    <script src="js/jquery-3.2.1.min.js"></script>
    <script src="js/bootstrap.min.js"></script>
    <link rel="stylesheet" href="css/bootstrap.css">
    <style>
        body{
            /*https://api.btstu.cn/sjbz/api.php?lx=dongman&format=images*/
            background: url(images/bg.jpg) fixed;
            background-size: 100%;
            background-repeat: no-repeat;
        }
        .container{
            background: white;
            opacity: 0.8;
        }
    </style>

</head>
<body>


    <!--导航栏-->
    <nav class="navbar navbar-default">
        <div class="container-fluid">
            <div class="navbar-header">
                <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#bs-example-navbar-collapse-1" aria-expanded="false">
                    <span class="sr-only">
                    刈剑社区
                    </span>
                    <span class="icon-bar"></span>
                    <span class="icon-bar"></span>
                    <span class="icon-bar"></span>
                </button>
                <a class="navbar-brand" href="/">刈剑社区</a>
            </div>

            <div class="collapse navbar-collapse" id="bs-example-navbar-collapse-1">

                <form class="navbar-form navbar-left">
                    <div class="form-group">
                        <input type="text" class="form-control" placeholder="搜索话题,问题">
                    </div>
                    <button type="submit" class="btn btn-default">搜索</button>
                </form>
                <ul class="nav navbar-nav navbar-right">
                    <li th:if="${session.user==null}">
                        <a href="https://github.com/login/oauth/authorize?client_id=c675236053a463ef56cb&redirect_uri=http://localhost:7777/callback&scope=user&state=1">
                            登录
                        </a>
                    </li>
                    <li class="dropdown" th:if="${session.user!=null}">
                        <img width="40px" height="40px" class="img-circle" th:src="${session.user.getAvatar_url()}" th:alt="${session.user.getName()}">
                    </li>

                    <li class="dropdown" th:if="${session.user!=null}">
                         <a href="/publish">发布问题</a>
                    </li>

                    <li class="dropdown" th:if="${session.user!=null}">
                        <a href="#" class="dropdown-toggle" data-toggle="dropdown" role="button" aria-haspopup="true" aria-expanded="false">
                            <i th:text="${session.user.getName()}"></i><span class="caret"></span>
                        </a>
                        <ul class="dropdown-menu">

                            <li><a href="#">消息中心</a></li>
                            <li><a href="#">个人资料</a></li>
                            <li role="separator" class="divider"></li>
                            <li><a href="#">退出登录</a></li>
                        </ul>
                    </li>
                </ul>
            </div><!-- /.navbar-collapse -->
        </div><!-- /.container-fluid -->
    </nav>


<div style="width:90%;margin: 0 auto;" class="container">

    <!-- 16:9 aspect ratio 可以实现动态切换 -->
    <!--<div class="embed-responsive embed-responsive-4by3">-->
        <!--<iframe class="embed-responsive-item" id="iframe"></iframe>-->
    <!--</div>-->
    <!--<script>-->
        <!--iframe.src="/publish";-->
    <!--</script>-->

    <!--主面板-->

    <div class="container-fluid" style="margin:30px;">
        <div class="row">
            <!--问题显示区-->
            <div class="col-md-9">
                <h2>
                    <span class="glyphicon glyphicon-list" aria-hidden="true"></span>发现
                </h2>
                <hr>

                <div class="media" th:each="question:${session.pagingData.getQuestionList()}">
                    <div class="media-left">
                        <a href="#">
                            <img class="media-object img-circle" width="64px" height="64px"
                                 th:src="${question.user.getAvatar_url()}" th:alt="${question.user.getName()}">
                        </a>
                    </div>
                    <div class="media-body">
                        <h4 class="media-heading" th:text="'标题:'+${question.getTitle()}"></h4>
                        <div th:text="${question.getDiscription()}"></div>
                        <div th:text="${question.getComment_count()}+'个评论··'+${question.getView_count()}+'次浏览··'+
                        ${question.getLike_count()}+'关注··'+ ${#dates.format(question.getGmt_create(),'YYYY-MM-dd HH:mm')}"></div>
                    </div>
                    <hr>
                </div>

                <nav aria-label="Page navigation">
                    <ul class="pagination">
                        <li th:if="${session.pagingData.isShowFirstPage()}">
                            <a th:href="'/?currentPage=1'" aria-label="Previous">
                                <span aria-hidden="false">&laquo;</span>
                            </a>
                        </li>
                        <li th:if="${session.pagingData.isShowLast()}">
                            <a th:href="'/?currentPage='+${session.pagingData.getCurrentPage()-1}" >
                                <span class="glyphicon glyphicon-menu-left" aria-hidden="true"></span>
                            </a>
                        </li>

                        <li th:each="num : ${session.pagingData.getPages()}" th:class="${session.pagingData.getCurrentPage()==num}?'active' : ''">
                            <a  th:text="${num}" th:href="'/?currentPage='+${num}"></a>
                        </li>
                        <li th:if="${session.pagingData.isShowNext()}">
                            <a th:href="'/?currentPage='+${session.pagingData.getCurrentPage()+1}" >
                                <span class="glyphicon glyphicon-menu-right" aria-hidden="true"></span>
                            </a>
                        </li>


                        <li th:if="${session.pagingData.isShowEndPage()}">
                            <a th:href="'/?currentPage='+${session.pagingData.getPageCount()}" aria-label="Next">
                                <span aria-hidden="true">&raquo;</span>
                            </a>
                        </li>
                    </ul>
                </nav>


            </div>


            <!--列表区-->
            <div class="col-md-3">
                热门主题

            </div>


        </div>
    </div>


</div>

</body>
</html>